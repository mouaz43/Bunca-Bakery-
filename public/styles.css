/* ---------- Hard resets to avoid dark-mode overrides ---------- */
:root { color-scheme: light; }
@media (prefers-color-scheme: dark) { :root { color-scheme: light; } }

* { box-sizing: border-box; }
html, body { height: 100%; }
html, body {
  background: #f6efe6 !important; /* latte foam */
  color: #2a221c !important;      /* espresso */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}
a { color: inherit; text-decoration: none; }
button, input, select { font: inherit; color: inherit; }

/* ---------- Theme tokens ---------- */
:root{
  --bg:#f6efe6;        /* latte foam */
  --card:#fff8ee;      /* light cream */
  --ink:#2a221c;       /* espresso */
  --accent:#8b6a4a;    /* latte art brown */
  --accent-2:#c8a689;  /* milk caramel */
  --line:#eadfcc;
  --muted:#a69382;
  --success:#2e7d32; --warn:#99621e; --danger:#8b2f2f;

  --r:16px;
  --pad:14px;
  --shadow:0 6px 18px rgba(0,0,0,.06), 0 2px 8px rgba(0,0,0,.05);
  --trans:160ms cubic-bezier(.2,.8,.2,1);
}

body{
  margin:0;
  font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  color:var(--ink);
  background:var(--bg);
}

/* ---------- Topbar ---------- */
.topbar{
  position:sticky; top:0; z-index:100; height:56px;
  display:flex; align-items:center; gap:10px;
  padding:0 10px;
  background:var(--card);
  border-bottom:1px solid var(--line);
  backdrop-filter:saturate(1.1) blur(4px);
}
.topbar .title{flex:1; text-align:center; font-weight:600; letter-spacing:.2px}
.icon-btn{
  display:inline-grid; place-items:center; width:36px; height:36px;
  border:1px solid var(--line); border-radius:10px;
  background:#fffdf8; color:var(--ink); box-shadow:var(--shadow);
  transition:transform var(--trans), border-color var(--trans), background var(--trans);
}
.icon-btn:hover{transform:translateY(-1px)}
.icon-btn:active{transform:translateY(0)}
.status{display:flex; align-items:center; gap:8px}
.badge{font-size:12px; padding:4px 8px; border-radius:999px; background:var(--line); color:var(--ink)}
.dot{width:10px;height:10px;border-radius:50%;display:inline-block}
.dot.online{background:#1db954}
.dot.offline{background:#bbb}
#progress{position:absolute;left:0;right:0;bottom:-1px;height:2px;background:linear-gradient(90deg,var(--accent),var(--accent-2));transform:scaleX(0);transform-origin:left}

/* ---------- Drawer ---------- */
.drawer{
  position:fixed; inset:0 auto 0 0; width:320px; background:var(--card);
  border-right:1px solid var(--line);
  translate:-100% 0; transition:translate 240ms ease; z-index:120;
  display:flex; flex-direction:column
}
.drawer.open{translate:0 0}
.drawer-head{display:flex; align-items:center; justify-content:space-between; padding:12px; border-bottom:1px solid var(--line)}
.brand{display:flex; align-items:center; gap:10px; font-weight:600}
.drawer-nav{display:flex; flex-direction:column; gap:6px; padding:10px}

/* Force link styling inside drawer (prevent blue/underline overrides) */
.drawer .nav-link{
  display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px;
  color:var(--ink) !important; text-decoration:none !important;
  border:1px solid transparent; transition:background var(--trans), border-color var(--trans)
}
.drawer .nav-link:hover{background:#fffdf8; border-color:var(--line)}

.quick{margin-top:8px; padding:10px; border:1px dashed var(--line); border-radius:12px; background:#fffbf3}
.muted{color:var(--muted); font-size:12px; margin-bottom:8px}
.chip{
  display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid var(--line);
  background:#fffdf8; cursor:pointer; margin:4px 6px 0 0; box-shadow:var(--shadow)
}
.drawer-footer{margin-top:auto; padding:10px}
.ghost{background:transparent; border:1px solid var(--line); border-radius:12px; padding:10px 12px; cursor:pointer}

/* Backdrop */
.backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.18);
  opacity:0; pointer-events:none; transition:opacity 220ms ease; z-index:110
}
.backdrop.show{opacity:1; pointer-events:auto}

/* Container */
.container{max-width:1100px; margin:18px auto 80px; padding:0 14px}

/* Cards & sections */
.section{margin:14px 0}
.card{
  background:var(--card); border:1px solid var(--line);
  border-radius:var(--r); padding:var(--pad); box-shadow:var(--shadow)
}
.hstack{display:flex; align-items:center; gap:10px}
.vstack{display:flex; flex-direction:column; gap:10px}

/* Inputs */
.input, .select, .number, .picker{
  width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:#fffdf8; outline:none;
}
.input:focus, .select:focus, .number:focus{border-color:var(--accent)}
.label{font-size:12px; color:var(--muted)}
.btn{
  display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid var(--line);
  background:#fffdf8; cursor:pointer; transition:transform var(--trans), background var(--trans)
}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:var(--accent); color:#fff; border-color:transparent}
.btn.danger{background:#fff1f1; color:var(--danger)}
.btn.outline{background:transparent}

/* Table (compact & wrapped) */
.table{width:100%; border-collapse:separate; border-spacing:0 8px}
.table thead th{font-size:12px; color:var(--muted); text-align:left; padding:2px 8px}
.table tbody tr{background:var(--card); box-shadow:var(--shadow)}
.table tbody td{padding:10px 8px; border-top:1px solid var(--line); border-bottom:1px solid var(--line)}
.td-actions{display:flex; gap:6px}
.badges{display:flex; flex-wrap:wrap; gap:6px}
.tag{font-size:12px; padding:4px 8px; border-radius:999px; background:#fff; border:1px solid var(--line)}
.small{font-size:12px; color:var(--muted)}
.trunc{white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:280px}

/* Recipe grid */
.grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:12px}
.recipe-card .hdr{display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:6px; font-weight:600}
.recipe-card .meta{display:flex; align-items:center; gap:8px; color:var(--muted); font-size:12px}

/* Toolbar */
.toolbar{display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:10px}
.toolbar .grow{flex:1}

/* Toasts */
.toasts{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:8px; z-index:130}
.toast{min-width:220px; background:#fffdf8; border:1px solid var(--line); padding:10px 12px; border-radius:12px; box-shadow:var(--shadow)}
.toast.success{border-color:#cfe9d1; background:#f5fbf6}
.toast.error{border-color:#f3c7c7; background:#fff6f6}

/* Modal */
.modal-wrap{position:fixed; inset:0; z-index:140; display:none}
.modal-wrap.show{display:block}
.modal{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:min(680px,92%); background:var(--card); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow)}
.modal .hd{display:flex; justify-content:space-between; align-items:center; padding:12px 14px; border-bottom:1px solid var(--line)}
.modal .bd{padding:12px 14px}
.modal .ft{display:flex; justify-content:flex-end; gap:8px; padding:12px 14px; border-top:1px solid var(--line)}

/* Mobile bottom action bar (optional placeholder) */
.bottom-bar{position:fixed; left:0; right:0; bottom:0; background:var(--card); border-top:1px solid var(--line); padding:10px; display:none; gap:8px; z-index:125}
@media(max-width:900px){.bottom-bar{display:flex}}
