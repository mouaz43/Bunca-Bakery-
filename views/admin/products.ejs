<section class="space-y-6">
  <h1 class="text-2xl font-semibold">Rohwaren</h1>

  <!-- Create -->
  <div class="card">
    <h3 class="card-title">Neues Produkt</h3>
    <form action="/admin/products" method="post" class="grid md:grid-cols-4 gap-3 text-sm">
      <div><label class="label">Code</label><input class="input" name="code" required /></div>
      <div><label class="label">Name</label><input class="input" name="name" required /></div>
      <div><label class="label">Kategorie</label><input class="input" name="category" /></div>
      <div>
        <label class="label">Supplier</label>
        <input class="input" name="supplier" />
      </div>
      <div>
        <label class="label">Unit (Einkauf)</label>
        <select class="input" name="unit" required>
          <% units.forEach(u => { %><option value="<%= u.code %>"><%= u.code %></option><% }) %>
        </select>
      </div>
      <div>
        <label class="label">Base Unit</label>
        <select class="input" name="base_unit" required>
          <% units.forEach(u => { %><option value="<%= u.code %>"><%= u.code %></option><% }) %>
        </select>
      </div>
      <div><label class="label">Unit Cost</label><input class="input" name="unit_cost" type="number" step="0.0001" placeholder="0.00" /></div>
      <div><label class="label">Waste %</label><input class="input" name="waste_pct" type="number" step="0.01" placeholder="0" /></div>
      <div><label class="label">Pack Size</label><input class="input" name="pack_size" type="number" step="0.0001" /></div>
      <div>
        <label class="label">Pack Unit</label>
        <select class="input" name="pack_unit">
          <option value=""></option>
          <% units.forEach(u => { %><option value="<%= u.code %>"><%= u.code %></option><% }) %>
        </select>
      </div>
      <div class="md:col-span-4">
        <button class="btn-primary">Anlegen</button>
      </div>
    </form>
  </div>

  <!-- List -->
  <div class="card">
    <h3 class="card-title">Bestehende Produkte</h3>
    <div class="overflow-auto">
      <table class="min-w-full text-sm">
        <thead>
          <tr class="text-left border-b">
            <th class="py-2 pr-3">Code</th>
            <th class="py-2 pr-3">Name</th>
            <th class="py-2 pr-3">Unit</th>
            <th class="py-2 pr-3">Base</th>
            <th class="py-2 pr-3">Cost</th>
            <th class="py-2 pr-3">Waste%</th>
            <th class="py-2 pr-3">Supplier</th>
            <th class="py-2 pr-3"></th>
          </tr>
        </thead>
        <tbody>
          <% if (!products.length) { %>
            <tr><td class="py-3 text-stone-500" colspan="8">Keine Produkte.</td></tr>
          <% } else { products.forEach(p => { %>
            <tr class="border-b last:border-0">
              <td class="py-2 pr-3 font-mono"><%= p.code %></td>
              <td class="py-2 pr-3"><%= p.name %></td>
              <td class="py-2 pr-3"><%= p.unit %></td>
              <td class="py-2 pr-3"><%= p.base_unit %></td>
              <td class="py-2 pr-3"><%= Number(p.unit_cost).toFixed(2) %></td>
              <td class="py-2 pr-3"><%= p.waste_pct %></td>
              <td class="py-2 pr-3"><%= p.supplier || '' %></td>
              <td class="py-2 pr-3">
                <a class="link" href="/admin/products/<%= p.id %>/edit">Bearbeiten</a>
              </td>
            </tr>
          <% }) } %>
        </tbody>
      </table>
    </div>
  </div>
</section>
