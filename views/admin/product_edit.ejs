<section class="space-y-6">
  <h1 class="text-2xl font-semibold">Produkt bearbeiten</h1>

  <div class="card">
    <form action="/admin/products/<%= p.id %>" method="post" class="grid md:grid-cols-4 gap-3 text-sm">
      <div><label class="label">Code</label><input class="input" name="code" value="<%= p.code %>" required /></div>
      <div><label class="label">Name</label><input class="input" name="name" value="<%= p.name %>" required /></div>
      <div><label class="label">Kategorie</label><input class="input" name="category" value="<%= p.category || '' %>" /></div>
      <div><label class="label">Supplier</label><input class="input" name="supplier" value="<%= p.supplier || '' %>" /></div>

      <div>
        <label class="label">Unit (Einkauf)</label>
        <select class="input" name="unit" required>
          <% units.forEach(u => { %>
            <option value="<%= u.code %>" <%= p.unit===u.code?'selected':'' %>><%= u.code %></option>
          <% }) %>
        </select>
      </div>
      <div>
        <label class="label">Base Unit</label>
        <select class="input" name="base_unit" required>
          <% units.forEach(u => { %>
            <option value="<%= u.code %>" <%= p.base_unit===u.code?'selected':'' %>><%= u.code %></option>
          <% }) %>
        </select>
      </div>

      <div><label class="label">Unit Cost</label><input class="input" name="unit_cost" type="number" step="0.0001" value="<%= p.unit_cost %>" /></div>
      <div><label class="label">Waste %</label><input class="input" name="waste_pct" type="number" step="0.01" value="<%= p.waste_pct %>" /></div>

      <div><label class="label">Pack Size</label><input class="input" name="pack_size" type="number" step="0.0001" value="<%= p.pack_size || '' %>" /></div>
      <div>
        <label class="label">Pack Unit</label>
        <select class="input" name="pack_unit">
          <option value=""></option>
          <% units.forEach(u => { %>
            <option value="<%= u.code %>" <%= p.pack_unit===u.code?'selected':'' %>><%= u.code %></option>
          <% }) %>
        </select>
      </div>

      <div class="md:col-span-4 flex gap-3">
        <button class="btn-primary">Speichern</button>
        <form action="/admin/products/<%= p.id %>/delete" method="post" onsubmit="return confirm('Wirklich löschen?');">
          <button class="btn-secondary">Löschen</button>
        </form>
        <a class="btn-secondary" href="/admin/products">Zurück</a>
      </div>
    </form>
  </div>
</section>
